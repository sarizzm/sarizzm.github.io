<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.whocareslearning.org.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true,"onmobile":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="吾生也有涯，知也无涯">
<meta property="og:type" content="website">
<meta property="og:title" content="codemk">
<meta property="og:url" content="https://www.whocareslearning.org.cn/page/3/index.html">
<meta property="og:site_name" content="codemk">
<meta property="og:description" content="吾生也有涯，知也无涯">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="zhouzhm">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.whocareslearning.org.cn/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>codemk</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">codemk</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记，人生感悟</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    

  <a href="https://github.com/sarizzm" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/19/datawhale-8-python-mo-kuai-datetime-mo-kuai/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/19/datawhale-8-python-mo-kuai-datetime-mo-kuai/" class="post-title-link" itemprop="url">python-8-模块-datetime模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-19 10:02:17" itemprop="dateCreated datePublished" datetime="2020-07-19T10:02:17+08:00">2020-07-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-31 23:53:03" itemprop="dateModified" datetime="2020-08-31T23:53:03+08:00">2020-08-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/19/datawhale-8-python-mo-kuai-datetime-mo-kuai/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/19/datawhale-8-python-mo-kuai-datetime-mo-kuai/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<p>[TOC]</p>
<p><strong>练习题</strong>：</p>
<p>1、怎么查出通过 from xx import xx导⼊的可以直接调⽤的⽅法？</p>
<p> 有种特殊的写法:from xx import *    在被导入的这个模块中如果没有写出<strong>all</strong>则默认所有内容都导入;</p>
<p>　　　　　　　　　　　　　　　　　　　　　　　　　　  否则,则导入<strong>all</strong>列表中列出来的所有名字.</p>
<p>2、了解Collection模块，编写程序以查询给定列表中最常见的元素。</p>
<p>题目说明：</p>
<p>输入：language = [‘PHP’, ‘PHP’, ‘Python’, ‘PHP’, ‘Python’, ‘JS’, ‘Python’, ‘Python’,’PHP’, ‘Python’]</p>
<p>输出：Python</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Input file</span></span><br><span class="line"><span class="string">language = ['PHP', 'PHP', 'Python', 'PHP', 'Python', 'JS', 'Python', 'Python','PHP', 'Python']</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">Output file</span></span><br><span class="line"><span class="string">Python</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">most_element</span><span class="params">(language)</span>:</span></span><br><span class="line">    <span class="string">""" Return a list of lines after inserting a word in a specific line. """</span></span><br><span class="line">   </span><br><span class="line">    <span class="comment"># your code here</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">language = [<span class="string">'PHP'</span>, <span class="string">'PHP'</span>, <span class="string">'Python'</span>, <span class="string">'PHP'</span>, <span class="string">'Python'</span>, <span class="string">'JS'</span>, <span class="string">'Python'</span>, <span class="string">'Python'</span>,<span class="string">'PHP'</span>, <span class="string">'Python'</span>]</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="comment">#b=Counter(language)</span></span><br><span class="line"><span class="comment">#print(b)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">most_element</span><span class="params">(self)</span>:</span></span><br><span class="line">    a=Counter(language)</span><br><span class="line">    print(a)<span class="comment">#Counter({'Python': 5, 'PHP': 4, 'JS': 1})</span></span><br><span class="line">    max_value = max(dict.values(a))</span><br><span class="line">    print(max_value)<span class="comment">#5</span></span><br><span class="line">    <span class="keyword">for</span> keys,values <span class="keyword">in</span> dict.items(a):</span><br><span class="line">        <span class="keyword">if</span> values==max_value:</span><br><span class="line">            print(<span class="string">'出现次数最多的是：'</span>,keys,<span class="string">'出现次数为'</span>,values,<span class="string">'次'</span>)</span><br><span class="line">most_element(language)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Counter({'Python': 5, 'PHP': 4, 'JS': 1})
5
出现次数最多的是： Python 出现次数为 5 次
</code></pre><p><strong>练习题</strong>：</p>
<p>1、假设你获取了用户输入的日期和时间如<code>2020-1-21 9:01:30</code>，以及一个时区信息如<code>UTC+5:00</code>，均是<code>str</code>，请编写一个函数将其转换为timestamp：</p>
<p>题目说明:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">Input file</span></span><br><span class="line"><span class="string">example1: dt_str='2020-6-1 08:10:30', tz_str='UTC+7:00'</span></span><br><span class="line"><span class="string">example2: dt_str='2020-5-31 16:10:30', tz_str='UTC-09:00'</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">Output file</span></span><br><span class="line"><span class="string">result1: 1590973830.0</span></span><br><span class="line"><span class="string">result2: 1590973830.0</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_timestamp</span><span class="params">(dt_str, tz_str)</span>:</span></span><br><span class="line">    <span class="comment"># your code here</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<p>2、编写Python程序以选择指定年份的所有星期日。</p>
<p>题目说明:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">Input file</span></span><br><span class="line"><span class="string">   2020</span></span><br><span class="line"><span class="string">   </span></span><br><span class="line"><span class="string">Output file</span></span><br><span class="line"><span class="string">   2020-01-05                         </span></span><br><span class="line"><span class="string">   2020-01-12              </span></span><br><span class="line"><span class="string">   2020-01-19                </span></span><br><span class="line"><span class="string">   2020-01-26               </span></span><br><span class="line"><span class="string">   2020-02-02     </span></span><br><span class="line"><span class="string">   -----</span></span><br><span class="line"><span class="string">   2020-12-06               </span></span><br><span class="line"><span class="string">   2020-12-13                </span></span><br><span class="line"><span class="string">   2020-12-20                </span></span><br><span class="line"><span class="string">   2020-12-27 </span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">   </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all_sundays</span><span class="params">(year)</span>:</span></span><br><span class="line">    <span class="comment"># your code here</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime,timedelta,timezone</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_timestamp</span><span class="params">(dt_str, tz_str)</span>:</span></span><br><span class="line">    cday = datetime.strptime(dt_str,<span class="string">'%Y-%m-%d %H:%M:%S'</span>)<span class="comment">#字符串转为时间</span></span><br><span class="line">    utc_group = re.match(<span class="string">r'([UTC]+)([+-])(\d+):(\d)'</span>,tz_str)<span class="comment">#字符串匹配，分组</span></span><br><span class="line">    i = int(utc_group.group(<span class="number">3</span>))<span class="comment">#时区数字</span></span><br><span class="line">    <span class="keyword">if</span> utc_group.group(<span class="number">2</span>) == <span class="string">'+'</span>:<span class="comment">#时区正负号</span></span><br><span class="line">        tz_utc = timezone(timedelta(hours=i))</span><br><span class="line">    <span class="keyword">elif</span> utc_group.group(<span class="number">2</span>) == <span class="string">'-'</span>:</span><br><span class="line">        tz_utc = timezone(timedelta(hours=-i))</span><br><span class="line">    dt = cday.replace(tzinfo=tz_utc)<span class="comment">#给tzinfo属性赋值</span></span><br><span class="line">    <span class="keyword">return</span> dt.timestamp()</span><br><span class="line"></span><br><span class="line"><span class="comment">#测试</span></span><br><span class="line">t1 = to_timestamp(<span class="string">'2015-6-1 08:10:30'</span>, <span class="string">'UTC+7:00'</span>)</span><br><span class="line"><span class="keyword">assert</span> t1 == <span class="number">1433121030.0</span>, t1</span><br><span class="line"></span><br><span class="line">t2 = to_timestamp(<span class="string">'2015-5-31 16:10:30'</span>, <span class="string">'UTC-09:00'</span>)</span><br><span class="line"><span class="keyword">assert</span> t2 == <span class="number">1433121030.0</span>, t2</span><br><span class="line"></span><br><span class="line">print(<span class="string">'ok'</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>ok
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询任意年内所有周日</span></span><br><span class="line"><span class="keyword">import</span> parser</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">a=input(<span class="string">'请输入年份:'</span>)</span><br><span class="line"><span class="comment">#print(type(a))</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all_sundays</span><span class="params">(year)</span>:</span></span><br><span class="line">    a0=int(a)</span><br><span class="line">    dt1=datetime.date(a0,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">    dt2=datetime.date(a0,<span class="number">12</span>,<span class="number">31</span>)</span><br><span class="line">    <span class="comment">#print(dt1,dt2)</span></span><br><span class="line">    dt=(dt2-dt1).days</span><br><span class="line">    <span class="string">'''zhou=(dt//7)#周数</span></span><br><span class="line"><span class="string">    zhouji=dt1.isoweekday()#判断当前周几</span></span><br><span class="line"><span class="string">    cha=7-zhouji</span></span><br><span class="line"><span class="string">    td_cha=datetime.timedelta(days=cha)</span></span><br><span class="line"><span class="string">    first_sunday=dt1+td_cha#第一个周日</span></span><br><span class="line"><span class="string">    print(first_sunday)'''</span></span><br><span class="line">    <span class="comment">#td_cha7=datetime.timedelta(days=7)#7天周日期差</span></span><br><span class="line">    <span class="comment">#difference=0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range((dt2-dt1).days+<span class="number">1</span>):</span><br><span class="line">        <span class="comment">#print(i)</span></span><br><span class="line">        day=dt1+datetime.timedelta(days=i)</span><br><span class="line">        bianli=day.isoweekday()</span><br><span class="line">        <span class="keyword">if</span> bianli==<span class="number">7</span>:</span><br><span class="line">            print(day)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">continue</span>       </span><br><span class="line">all_sundays(a)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>请输入年份:2020
2020-01-05
2020-01-12
2020-01-19
2020-01-26
2020-02-02
2020-02-09
2020-02-16
2020-02-23
2020-03-01
2020-03-08
2020-03-15
2020-03-22
2020-03-29
2020-04-05
2020-04-12
2020-04-19
2020-04-26
2020-05-03
2020-05-10
2020-05-17
2020-05-24
2020-05-31
2020-06-07
2020-06-14
2020-06-21
2020-06-28
2020-07-05
2020-07-12
2020-07-19
2020-07-26
2020-08-02
2020-08-09
2020-08-16
2020-08-23
2020-08-30
2020-09-06
2020-09-13
2020-09-20
2020-09-27
2020-10-04
2020-10-11
2020-10-18
2020-10-25
2020-11-01
2020-11-08
2020-11-15
2020-11-22
2020-11-29
2020-12-06
2020-12-13
2020-12-20
2020-12-27
</code></pre><h1 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h1><h2 id="1-导入模块"><a href="#1-导入模块" class="headerlink" title="1. 导入模块"></a>1. 导入模块</h2><p>【例子】创建一个模块 TemperatureConversion.py</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># TemperatureConversion.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c2f</span><span class="params">(cel)</span>:</span></span><br><span class="line">    fah = cel * <span class="number">1.8</span> + <span class="number">32</span></span><br><span class="line">    <span class="keyword">return</span> fah</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2c</span><span class="params">(fah)</span>:</span></span><br><span class="line">    cel = (fah - <span class="number">32</span>) / <span class="number">1.8</span></span><br><span class="line">    <span class="keyword">return</span> cel</span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>第一种：import 模块名</li>
</ul>
<p>【例子】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import TemperatureConversion</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'32摄氏度 = %.2f华氏度'</span> % c2f(<span class="number">32</span>)) <span class="comment">#TemperatureConversion.c2f(32))</span></span><br><span class="line">print(<span class="string">'99华氏度 = %.2f摄氏度'</span> % f2c(<span class="number">99</span>))<span class="comment"># TemperatureConversion.f2c(99))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 32摄氏度 = 89.60华氏度</span></span><br><span class="line"><span class="comment"># 99华氏度 = 37.22摄氏度</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>32摄氏度 = 89.60华氏度
99华氏度 = 37.22摄氏度
</code></pre><ul>
<li>第二种：from 模块名 import 函数名</li>
</ul>
<p>【例子】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#from TemperatureConversion import c2f, f2c</span></span><br><span class="line">print(<span class="string">'32摄氏度 = %.2f华氏度'</span> % c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">'99华氏度 = %.2f摄氏度'</span> % f2c(<span class="number">99</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 32摄氏度 = 89.60华氏度</span></span><br><span class="line"><span class="comment"># 99华氏度 = 37.22摄氏度</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>32摄氏度 = 89.60华氏度
99华氏度 = 37.22摄氏度
</code></pre><p>下面的方式不推荐</p>
<p>【例子】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from TemperatureConversion import *</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'32摄氏度 = %.2f华氏度'</span> % c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">'99华氏度 = %.2f摄氏度'</span> % f2c(<span class="number">99</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 32摄氏度 = 89.60华氏度</span></span><br><span class="line"><span class="comment"># 99华氏度 = 37.22摄氏度</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>32摄氏度 = 89.60华氏度
99华氏度 = 37.22摄氏度
</code></pre><ul>
<li>第三种：import 模块名 as 新名字</li>
</ul>
<p>【例子】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import TemperatureConversion as tc</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">'32摄氏度 = %.2f华氏度'</span> % c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">'99华氏度 = %.2f摄氏度'</span> % f2c(<span class="number">99</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 32摄氏度 = 89.60华氏度</span></span><br><span class="line"><span class="comment"># 99华氏度 = 37.22摄氏度</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>32摄氏度 = 89.60华氏度
99华氏度 = 37.22摄氏度
</code></pre><h2 id="2-if-name-39-main-39"><a href="#2-if-name-39-main-39" class="headerlink" title="2. if __name__ == '__main__'"></a>2. <code>if __name__ == '__main__'</code></h2><p>对于很多编程语言来说，程序都必须要有一个入口，而 Python 则不同，它属于脚本语言，不像编译型语言那样先将程序编译成二进制再运行，而是动态的逐行解释运行。也就是从脚本第一行开始运行，没有统一的入口。</p>
<p>假设我们有一个 const.py 文件，内容如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">PI = <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"PI:"</span>, PI)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"></span><br><span class="line"><span class="comment"># PI: 3.14</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>PI: 3.14
</code></pre><p>现在，我们写一个用于计算圆面积的 area.py 文件，area.py 文件需要用到 const.py 文件中的 <code>PI</code> 变量。从 const.py 中，我们把 <code>PI</code> 变量导入 area.py：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from const import PI</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calc_round_area</span><span class="params">(radius)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> PI * (radius ** <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"round area: "</span>, calc_round_area(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main()</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">PI: 3.14</span></span><br><span class="line"><span class="string">round area:  12.56</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>round area:  12.56

'\nPI: 3.14\nround area:  12.56\n'
</code></pre><p>我们看到 const.py 中的 main 函数也被运行了，实际上我们不希望它被运行，因为 const.py 提供的 main 函数只是为了测试常量定义。这时<code>if __name__ == '__main__'</code>派上了用场，我们把 const.py 改一下，添加<code>if __name__ == "__main__"</code>：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PI = <span class="number">3.14</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"PI:"</span>, PI)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>PI: 3.14
</code></pre><p>运行 const.py，输出如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PI: <span class="number">3.14</span></span><br></pre></td></tr></tbody></table></figure>
<p>运行 area.py，输出如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">round area:  <span class="number">12.56</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>__name__</code>：是内置变量，可用于表示当前模块的名字。</p>
<p>import const</p>
<p>print(<strong>name</strong>)</p>
<p><strong>main</strong></p>
<p>print(const.<strong>name</strong>)</p>
<p>const</p>
<p>由此我们可知：如果一个 .py 文件（模块）被直接运行时，其<code>__name__</code>值为<code>__main__</code>，即模块名为<code>__main__</code>。</p>
<p>所以，<code>if __name__ == '__main__'</code>的意思是：当 .py 文件被直接运行时，<code>if __name__ == '__main__'</code>之下的代码块将被运行；当 .py 文件以模块形式被导入时，<code>if __name__ == '__main__'</code>之下的代码块不被运行。</p>
<h2 id="3-搜索路径"><a href="#3-搜索路径" class="headerlink" title="3. 搜索路径"></a>3. 搜索路径</h2><p>当解释器遇到 import 语句，如果模块在当前的搜索路径就会被导入。</p>
<p>【例子】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">print(sys.path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ['C:\\ProgramData\\Anaconda3\\DLLs', 'C:\\ProgramData\\Anaconda3\\lib', 'C:\\ProgramData\\Anaconda3', 'C:\\ProgramData\\Anaconda3\\lib\\site-packages',...]</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['D:\\ucas_onedrive\\OneDrive - mails.ucas.ac.cn\\MyGitHub\\mybog\\datawhale\\python基础', 'D:\\ProgramData\\Anaconda3\\python37.zip', 'D:\\ProgramData\\Anaconda3\\DLLs', 'D:\\ProgramData\\Anaconda3\\lib', 'D:\\ProgramData\\Anaconda3', '', 'C:\\Users\\sarizzm\\AppData\\Roaming\\Python\\Python37\\site-packages', 'D:\\ProgramData\\Anaconda3\\lib\\site-packages', 'D:\\ProgramData\\Anaconda3\\lib\\site-packages\\win32', 'D:\\ProgramData\\Anaconda3\\lib\\site-packages\\win32\\lib', 'D:\\ProgramData\\Anaconda3\\lib\\site-packages\\Pythonwin', 'D:\\ProgramData\\Anaconda3\\lib\\site-packages\\IPython\\extensions', 'C:\\Users\\sarizzm\\.ipython']
</code></pre><p><u>我们使用 import 语句的时候，Python 解释器是怎样找到对应的文件的呢？</u></p>
<p>这就涉及到 Python 的搜索路径，搜索路径是由一系列目录名组成的，Python 解释器就依次从这些目录中去寻找所引入的模块。</p>
<p>这看起来很像环境变量，事实上，也可以通过定义环境变量的方式来确定搜索路径。</p>
<p>搜索路径是在 Python 编译或安装的时候确定的，安装新的库应该也会修改。搜索路径被存储在 <code>sys</code> 模块中的 <code>path</code> 变量中。</p>
<h2 id="4-包（package）"><a href="#4-包（package）" class="headerlink" title="4. 包（package）"></a>4. 包（package）</h2><p>包是一种管理 Python 模块命名空间的形式，采用”点模块名称”。</p>
<p>创建包分为三个步骤：</p>
<ul>
<li>创建一个文件夹，用于存放相关的模块，文件夹的名字即包的名字。</li>
<li>在文件夹中创建一个 <code>__init__.py</code> 的模块文件，内容可以为空。</li>
<li>将相关的模块放入文件夹中。</li>
</ul>
<p>不妨假设你想设计一套统一处理声音文件和数据的模块（或者称之为一个”包”）。</p>
<p>现存很多种不同的音频文件格式（基本上都是通过后缀名区分的，例如： .wav，.aiff，.au），所以你需要有一组不断增加的模块，用来在不同的格式之间转换。</p>
<p>并且针对这些音频数据，还有很多不同的操作（比如混音，添加回声，增加均衡器功能，创建人造立体声效果），所以你还需要一组怎么也写不完的模块来处理这些操作。</p>
<p>这里给出了一种可能的包结构（在分层的文件系统中）:<br>sound/                          顶层包<br>      <strong>init</strong>.py               初始化 sound 包<br>      formats/                  文件格式转换子包<br>              <strong>init</strong>.py<br>              wavread.py<br>              wavwrite.py<br>              aiffread.py<br>              aiffwrite.py<br>              auread.py<br>              auwrite.py<br>              …<br>      effects/                  声音效果子包<br>              <strong>init</strong>.py<br>              echo.py<br>              surround.py<br>              reverse.py<br>              …<br>      filters/                  filters 子包<br>              <strong>init</strong>.py<br>              equalizer.py<br>              vocoder.py<br>              karaoke.py<br>              …<br>在导入一个包的时候，Python 会根据 <code>sys.path</code> 中的目录来寻找这个包中包含的子目录。</p>
<p>目录只有包含一个叫做 <code>__init__.py</code> 的文件才会被认作是一个包，最简单的情况，放一个空的 <code>__init__.py</code> 就可以了。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sound.effects.echo</span><br></pre></td></tr></tbody></table></figure>
<p>这将会导入子模块 <code>sound.effects.echo</code>。 他必须使用全名去访问:</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sound.effects.echo.echofilter(input, output, delay=<span class="number">0.7</span>, atten=<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>还有一种导入子模块的方法是：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sound.effects <span class="keyword">import</span> echo</span><br></pre></td></tr></tbody></table></figure>
<p>这同样会导入子模块: echo，并且他不需要那些冗长的前缀，所以他可以这样使用：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo.echofilter(input, output, delay=<span class="number">0.7</span>, atten=<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>还有一种变化就是直接导入一个函数或者变量：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sound.effects.echo <span class="keyword">import</span> echofilter</span><br></pre></td></tr></tbody></table></figure>
<p>同样的，这种方法会导入子模块: echo，并且可以直接使用他的 echofilter() 函数：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echofilter(input, output, delay=<span class="number">0.7</span>, atten=<span class="number">4</span>)</span><br></pre></td></tr></tbody></table></figure>
<p>注意当使用 <code>from package import item</code> 这种形式的时候，对应的 <code>item</code> 既可以是包里面的子模块（子包），或者包里面定义的其他名称，比如函数，类或者变量。</p>
<p><u>设想一下，如果我们使用 <code>from sound.effects import *</code> 会发生什么？</u></p>
<p>Python 会进入文件系统，找到这个包里面所有的子模块，一个一个的把它们都导入进来。</p>
<p>导入语句遵循如下规则：如果包定义文件 <code>__init__.py</code> 存在一个叫做 <code>__all__</code> 的列表变量，那么在使用 <code>from package import *</code> 的时候就把这个列表中的所有名字作为包内容导入。</p>
<p>这里有一个例子，在 <code>sounds/effects/__init__.py</code>中包含如下代码：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__all__ = [<span class="string">"echo"</span>, <span class="string">"surround"</span>, <span class="string">"reverse"</span>]</span><br></pre></td></tr></tbody></table></figure>
<p>这表示当你使用 <code>from sound.effects import *</code>这种用法时，你只会导入包里面这三个子模块。</p>
<p>如果 <code>__all__</code> 真的没有定义，那么使用<code>from sound.effects import *</code>这种语法的时候，就不会导入包 <code>sound.effects</code> 里的任何子模块。他只是把包 <code>sound.effects</code> 和它里面定义的所有内容导入进来（可能运行<code>__init__.py</code>里定义的初始化代码）。</p>
<p>这会把 <code>__init__.py</code> 里面定义的所有名字导入进来。并且他不会破坏掉我们在这句话之前导入的所有明确指定的模块。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sound.effects.echo</span><br><span class="line"><span class="keyword">import</span> sound.effects.surround</span><br><span class="line"><span class="keyword">from</span> sound.effects <span class="keyword">import</span> *</span><br></pre></td></tr></tbody></table></figure>
<p>这个例子中，在执行 <code>from...import</code> 前，包 <code>sound.effects</code> 中的 <code>echo</code> 和 <code>surround</code> 模块都被导入到当前的命名空间中了。</p>
<p>通常我们并不主张使用 <code>*</code> 这种方法来导入模块，因为这种方法经常会导致代码的可读性降低。</p>
<h1 id="datetime模块"><a href="#datetime模块" class="headerlink" title="datetime模块"></a>datetime模块</h1><p>datetime 是 Python 中处理日期的标准模块，它提供了 4 种对日期和时间进行处理的类：<strong>datetime</strong>、<strong>date</strong>、<strong>time</strong> 和 <strong>timedelta</strong>。</p>
<hr>
<h2 id="1-datetime类"><a href="#1-datetime类" class="headerlink" title="1. datetime类"></a>1. datetime类</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">datetime</span><span class="params">(date)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, year, month, day, hour, minute, second, microsecond, tzinfo)</span></span></span><br><span class="line"><span class="function">        <span class="title">pass</span></span></span><br><span class="line"><span class="function">    <span class="title">def</span> <span class="title">now</span><span class="params">(cls, tz=None)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timestamp</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fromtimestamp</span><span class="params">(cls, t, tz=None)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">date</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">time</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">year</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">month</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">day</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hour</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minute</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">second</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isoweekday</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">strftime</span><span class="params">(self, fmt)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">combine</span><span class="params">(cls, date, time, tzinfo=True)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>datetime.now(tz=None)</code> 获取当前的日期时间，输出顺序为：年、月、日、时、分、秒、微秒。</li>
<li><code>datetime.timestamp()</code> 获取以 1970年1月1日为起点记录的秒数。</li>
<li><code>datetime.fromtimestamp(tz=None)</code> 使用 unixtimestamp 创建一个 datetime。</li>
</ul>
<p>【例子】如何创建一个 datetime 对象？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">dt = datetime.datetime(year=<span class="number">2020</span>, month=<span class="number">6</span>, day=<span class="number">25</span>, hour=<span class="number">11</span>, minute=<span class="number">23</span>, second=<span class="number">59</span>)</span><br><span class="line">print(dt)  <span class="comment"># 2020-06-25 11:23:59</span></span><br><span class="line">print(dt.timestamp())  <span class="comment"># 1593055439.0</span></span><br><span class="line"></span><br><span class="line">dt = datetime.datetime.fromtimestamp(<span class="number">1593055439.0</span>)</span><br><span class="line">print(dt)  <span class="comment"># 2020-06-25 11:23:59</span></span><br><span class="line">print(type(dt)) <span class="comment"># &lt;class 'datetime.datetime'&gt;</span></span><br><span class="line"></span><br><span class="line">dt = datetime.datetime.now()</span><br><span class="line">print(dt)  <span class="comment"># 2020-06-25 11:11:03.877853</span></span><br><span class="line">print(type(dt))  <span class="comment"># &lt;class 'datetime.datetime'&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2020-06-25 11:23:59
1593055439.0
2020-06-25 11:23:59
&lt;class 'datetime.datetime'&gt;
2020-08-06 11:01:57.067912
&lt;class 'datetime.datetime'&gt;
</code></pre><ul>
<li><code>datetime.strftime(fmt)</code> 格式化 datetime 对象。</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">符号</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>%a</code></td>
<td>本地简化星期名称（如星期一，返回 Mon）</td>
</tr>
<tr>
<td style="text-align:center"><code>%A</code></td>
<td>本地完整星期名称（如星期一，返回 Monday）</td>
</tr>
<tr>
<td style="text-align:center"><code>%b</code></td>
<td>本地简化的月份名称（如一月，返回 Jan）</td>
</tr>
<tr>
<td style="text-align:center"><code>%B</code></td>
<td>本地完整的月份名称（如一月，返回 January）</td>
</tr>
<tr>
<td style="text-align:center"><code>%c</code></td>
<td>本地相应的日期表示和时间表示</td>
</tr>
<tr>
<td style="text-align:center"><code>%d</code></td>
<td>月内中的一天（0-31）</td>
</tr>
<tr>
<td style="text-align:center"><code>%H</code></td>
<td>24小时制小时数（0-23）</td>
</tr>
<tr>
<td style="text-align:center"><code>%I</code></td>
<td>12小时制小时数（01-12）</td>
</tr>
<tr>
<td style="text-align:center"><code>%j</code></td>
<td>年内的一天（001-366）</td>
</tr>
<tr>
<td style="text-align:center"><code>%m</code></td>
<td>月份（01-12）</td>
</tr>
<tr>
<td style="text-align:center"><code>%M</code></td>
<td>分钟数（00-59）</td>
</tr>
<tr>
<td style="text-align:center"><code>%p</code></td>
<td>本地A.M.或P.M.的等价符</td>
</tr>
<tr>
<td style="text-align:center"><code>%S</code></td>
<td>秒（00-59）</td>
</tr>
<tr>
<td style="text-align:center"><code>%U</code></td>
<td>一年中的星期数（00-53）星期天为星期的开始</td>
</tr>
<tr>
<td style="text-align:center"><code>%w</code></td>
<td>星期（0-6），星期天为星期的开始</td>
</tr>
<tr>
<td style="text-align:center"><code>%W</code></td>
<td>一年中的星期数（00-53）星期一为星期的开始</td>
</tr>
<tr>
<td style="text-align:center"><code>%x</code></td>
<td>本地相应的日期表示</td>
</tr>
<tr>
<td style="text-align:center"><code>%X</code></td>
<td>本地相应的时间表示</td>
</tr>
<tr>
<td style="text-align:center"><code>%y</code></td>
<td>两位数的年份表示（00-99）</td>
</tr>
<tr>
<td style="text-align:center"><code>%Y</code></td>
<td>四位数的年份表示（0000-9999）</td>
</tr>
<tr>
<td style="text-align:center"><code>%Z</code></td>
<td>当前时区的名称（如果是本地时间，返回空字符串）</td>
</tr>
<tr>
<td style="text-align:center"><code>%%</code></td>
<td>%号本身</td>
</tr>
</tbody>
</table>
</div>
<p>【例子】如何将 datetime 对象转换为任何格式的日期？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">dt = datetime.datetime(year=<span class="number">2020</span>, month=<span class="number">6</span>, day=<span class="number">25</span>, hour=<span class="number">11</span>, minute=<span class="number">51</span>, second=<span class="number">49</span>)</span><br><span class="line">s = dt.strftime(<span class="string">"'%Y/%m/%d %H:%M:%S"</span>)</span><br><span class="line">print(s)  <span class="comment"># '2020/06/25 11:51:49</span></span><br><span class="line"></span><br><span class="line">s = dt.strftime(<span class="string">'%d %B, %Y, %A'</span>)</span><br><span class="line">print(s)  <span class="comment"># 25 June, 2020, Thursday</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>'2020/06/25 11:51:49
25 June, 2020, Thursday
</code></pre><p>【练习】如何将给定日期转换为 “mmm-dd, YYYY” 的格式？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line">d1 = datetime.date(<span class="number">2010</span>,<span class="number">9</span>,<span class="number">28</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="string">'Sep-28,2010'</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>'Sep-28,2010'
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">d1 = datetime.date(<span class="number">2010</span>, <span class="number">9</span>, <span class="number">28</span>)</span><br><span class="line">print(d1.strftime(<span class="string">'%b-%d,%Y'</span>))</span><br><span class="line"><span class="comment"># Sep-28,2010</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>Sep-28,2010
</code></pre><ul>
<li><code>datetime.date()</code> Return the date part.</li>
<li><code>datetime.time()</code> Return the time part, with tzinfo None.</li>
<li><code>datetime.year</code> 年</li>
<li><code>datetime.month</code> 月</li>
<li><code>datetime.day</code> 日</li>
<li><code>datetime.hour</code> 小时</li>
<li><code>datetime.minute</code> 分钟</li>
<li><code>datetime.second</code> 秒</li>
<li><code>datetime.isoweekday</code> 星期几</li>
</ul>
<p>【例子】datetime 对象包含很多与日期时间相关的实用功能。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">dt = datetime.datetime(year=<span class="number">2020</span>, month=<span class="number">6</span>, day=<span class="number">25</span>, hour=<span class="number">11</span>, minute=<span class="number">51</span>, second=<span class="number">49</span>)</span><br><span class="line">print(dt.date())  <span class="comment"># 2020-06-25</span></span><br><span class="line">print(type(dt.date()))  <span class="comment"># &lt;class 'datetime.date'&gt;</span></span><br><span class="line">print(dt.time())  <span class="comment"># 11:51:49</span></span><br><span class="line">print(type(dt.time()))  <span class="comment"># &lt;class 'datetime.time'&gt;</span></span><br><span class="line">print(dt.year)  <span class="comment"># 2020</span></span><br><span class="line">print(dt.month)  <span class="comment"># 6</span></span><br><span class="line">print(dt.day)  <span class="comment"># 25</span></span><br><span class="line">print(dt.hour)  <span class="comment"># 11</span></span><br><span class="line">print(dt.minute)  <span class="comment"># 51</span></span><br><span class="line">print(dt.second)  <span class="comment"># 49</span></span><br><span class="line">print(dt.isoweekday())  <span class="comment"># 4</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2020-06-25
&lt;class 'datetime.date'&gt;
11:51:49
&lt;class 'datetime.time'&gt;
2020
6
25
11
51
49
4
</code></pre><p>在处理含有字符串日期的数据集或表格时，我们需要一种自动解析字符串的方法，无论它是什么格式的，都可以将其转化为 datetime 对象。这时，就要使用到 dateutil 中的 parser 模块。</p>
<ul>
<li><code>parser.parse(timestr, parserinfo=None, **kwargs)</code> </li>
</ul>
<p>【例子】如何在 python 中将字符串解析为 datetime对象？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dateutil <span class="keyword">import</span> parser</span><br><span class="line"></span><br><span class="line">s = <span class="string">'2020-06-25'</span></span><br><span class="line">dt = parser.parse(s)</span><br><span class="line">print(dt)  <span class="comment"># 2020-06-25 00:00:00</span></span><br><span class="line">print(type(dt))  <span class="comment"># &lt;class 'datetime.datetime'&gt;</span></span><br><span class="line"></span><br><span class="line">s = <span class="string">'March 31, 2010, 10:51pm'</span></span><br><span class="line">dt = parser.parse(s)</span><br><span class="line">print(dt)  <span class="comment"># 2010-03-31 22:51:00</span></span><br><span class="line">print(type(dt))  <span class="comment"># &lt;class 'datetime.datetime'&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2020-06-25 00:00:00
&lt;class 'datetime.datetime'&gt;
2010-03-31 22:51:00
&lt;class 'datetime.datetime'&gt;
</code></pre><p>练习】如何将字符串日期解析为 datetime 对象？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line">s1 = <span class="string">"2010 Jan 1"</span></span><br><span class="line">s2 = <span class="string">'31-1-2000'</span></span><br><span class="line">s3 = <span class="string">'October10, 1996, 10:40pm'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment">#2010-01-01 00:00:00</span></span><br><span class="line"><span class="comment">#2000-01-31 00:00:00</span></span><br><span class="line"><span class="comment">#2019-10-10 22:40:00</span></span><br><span class="line"><span class="comment">#【参考答案】</span></span><br><span class="line"><span class="keyword">from</span> dateutil <span class="keyword">import</span> parser</span><br><span class="line"></span><br><span class="line">s1 = <span class="string">"2010 Jan 1"</span></span><br><span class="line">s2 = <span class="string">'31-1-2000'</span></span><br><span class="line">s3 = <span class="string">'October10, 1996, 10:40pm'</span></span><br><span class="line"></span><br><span class="line">dt1 = parser.parse(s1)</span><br><span class="line">dt2 = parser.parse(s2)</span><br><span class="line">dt3 = parser.parse(s3)</span><br><span class="line"></span><br><span class="line">print(dt1)  <span class="comment"># 2010-01-01 00:00:00</span></span><br><span class="line">print(dt2)  <span class="comment"># 2000-01-31 00:00:00</span></span><br><span class="line">print(dt3)  <span class="comment"># 1996-10-10 22:40:00</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2010-01-01 00:00:00
2000-01-31 00:00:00
1996-10-10 22:40:00
</code></pre><p>【练习】计算以下列表中连续的天数。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line"><span class="comment"># ['Oct, 2, 1869', 'Oct, 10, 1869', 'Oct, 15, 1869', 'Oct, 20, 1869','Oct, 23, 1869']</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># [8, 5, 5, 3]</span></span><br><span class="line"><span class="comment"># 【参考答案】</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> dateutil <span class="keyword">import</span> parser</span><br><span class="line"></span><br><span class="line">dateString = [<span class="string">'Oct, 2, 1869'</span>, <span class="string">'Oct, 10, 1869'</span>, <span class="string">'Oct, 15, 1869'</span>, <span class="string">'Oct, 20, 1869'</span>, <span class="string">'Oct, 23, 1869'</span>]</span><br><span class="line">dates = [parser.parse(i) <span class="keyword">for</span> i <span class="keyword">in</span> dateString]</span><br><span class="line">td = np.diff(dates)</span><br><span class="line">print(td)</span><br><span class="line"><span class="comment"># [datetime.timedelta(days=8) datetime.timedelta(days=5)</span></span><br><span class="line"><span class="comment">#  datetime.timedelta(days=5) datetime.timedelta(days=3)]</span></span><br><span class="line">d = [i.days <span class="keyword">for</span> i <span class="keyword">in</span> td]</span><br><span class="line">print(d)  <span class="comment"># [8, 5, 5, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[datetime.timedelta(days=8) datetime.timedelta(days=5)
 datetime.timedelta(days=5) datetime.timedelta(days=3)]
[8, 5, 5, 3]
</code></pre><h2 id="2-date类"><a href="#2-date类" class="headerlink" title="2. date类"></a>2. date类</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">date</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, year, month, day)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">today</span><span class="params">(cls)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li><code>date.today()</code> 获取当前日期信息。</li>
</ul>
<p>【例子】如何在 Python 中获取当前日期和时间？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">d = datetime.date(<span class="number">2020</span>, <span class="number">6</span>, <span class="number">25</span>)</span><br><span class="line">print(d)  <span class="comment"># 2020-06-25</span></span><br><span class="line">print(type(d))  <span class="comment"># &lt;class 'datetime.date'&gt;</span></span><br><span class="line"></span><br><span class="line">d = datetime.date.today()</span><br><span class="line">print(d)  <span class="comment"># 2020-06-25</span></span><br><span class="line">print(type(d))  <span class="comment"># &lt;class 'datetime.date'&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2020-06-25
&lt;class 'datetime.date'&gt;
2020-08-06
&lt;class 'datetime.date'&gt;
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 【练习】如何统计两个日期之间有多少个星期六？</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入</span></span><br><span class="line">d1 = datetime.date(<span class="number">1869</span>, <span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">d2 = datetime.date(<span class="number">1869</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># 40</span></span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></tbody></table></figure>
<h1 id="【参考答案】"><a href="#【参考答案】" class="headerlink" title="【参考答案】"></a>【参考答案】</h1><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">import datetime</span><br><span class="line"></span><br><span class="line">d1 = datetime.date(1869, 1, 2)</span><br><span class="line">d2 = datetime.date(1869, 10, 2)</span><br><span class="line">dt = (d2 - d1).days</span><br><span class="line"><span class="attribute">print(dt)</span></span><br><span class="line">print(d1.isoweekday())  # 6</span><br><span class="line">print(dt // 7 + 1)  # 40</span><br></pre></td></tr></tbody></table></figure>
<pre><code>273
6
40
</code></pre><h2 id="3-time类"><a href="#3-time类" class="headerlink" title="3. time类"></a>3. time类</h2><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">time</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, hour, minute, second, microsecond, tzinfo)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<p>【例子】如何使用 datetime.time() 类？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">t = datetime.time(<span class="number">12</span>, <span class="number">9</span>, <span class="number">23</span>, <span class="number">12980</span>)</span><br><span class="line">print(t)  <span class="comment"># 12:09:23.012980</span></span><br><span class="line">print(type(t))  <span class="comment"># &lt;class 'datetime.time'&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>12:09:23.012980
&lt;class 'datetime.time'&gt;
</code></pre><p>注意：</p>
<ul>
<li>1秒 = 1000 毫秒（milliseconds）</li>
<li>1毫秒 = 1000 微妙（microseconds）</li>
</ul>
<p>【练习】如何将给定日期转换为当天开始的时间？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">date = datetime.date(<span class="number">2019</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">print(date)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment">#2019-10-02 00:00:00</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2019-10-02
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#【参考答案】</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">date = datetime.date(<span class="number">2019</span>, <span class="number">10</span>, <span class="number">2</span>)</span><br><span class="line">dt = datetime.datetime(date.year, date.month, date.day)</span><br><span class="line">print(dt)  <span class="comment"># 2019-10-02 00:00:00</span></span><br><span class="line"></span><br><span class="line">dt = datetime.datetime.combine(date, datetime.time.min)</span><br><span class="line">print(dt)  <span class="comment"># 2019-10-02 00:00:00</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>2019-10-02 00:00:00
2019-10-02 00:00:00
</code></pre><h2 id="4-timedelta类"><a href="#4-timedelta类" class="headerlink" title="4. timedelta类"></a>4. timedelta类</h2><p><code>timedelta</code> 表示具体时间实例中的一段时间。你可以把它们简单想象成两个日期或时间之间的间隔。</p>
<p>它常常被用来从 <code>datetime</code> 对象中添加或移除一段特定的时间。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">timedelta</span><span class="params">(SupportsAbs[timedelta])</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, days, seconds, microseconds, milliseconds, minutes, hours, weeks,)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">days</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">total_seconds</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></tbody></table></figure>
<p>【例子】如何使用 datetime.timedelta() 类？</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">td = datetime.timedelta(days=<span class="number">30</span>)</span><br><span class="line">print(td)  <span class="comment"># 30 days, 0:00:00</span></span><br><span class="line">print(type(td))  <span class="comment"># &lt;class 'datetime.timedelta'&gt;</span></span><br><span class="line">print(datetime.date.today())  <span class="comment"># 2020-07-01</span></span><br><span class="line">print(datetime.date.today() + td)  <span class="comment"># 2020-07-31</span></span><br><span class="line"></span><br><span class="line">dt1 = datetime.datetime(<span class="number">2020</span>, <span class="number">1</span>, <span class="number">31</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">dt2 = datetime.datetime(<span class="number">2019</span>, <span class="number">1</span>, <span class="number">31</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">0</span>)</span><br><span class="line">td = dt1 - dt2</span><br><span class="line">print(td)  <span class="comment"># 365 days, 0:00:00</span></span><br><span class="line">print(type(td))  <span class="comment"># &lt;class 'datetime.timedelta'&gt;</span></span><br><span class="line"></span><br><span class="line">td1 = datetime.timedelta(days=<span class="number">30</span>)  <span class="comment"># 30 days</span></span><br><span class="line">td2 = datetime.timedelta(weeks=<span class="number">1</span>)  <span class="comment"># 1 week</span></span><br><span class="line">td = td1 - td2</span><br><span class="line">print(td)  <span class="comment"># 23 days, 0:00:00</span></span><br><span class="line">print(type(td))  <span class="comment"># &lt;class 'datetime.timedelta'&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>30 days, 0:00:00
&lt;class 'datetime.timedelta'&gt;
2020-08-06
2020-09-05
365 days, 0:00:00
&lt;class 'datetime.timedelta'&gt;
23 days, 0:00:00
&lt;class 'datetime.timedelta'&gt;
</code></pre><p>如果将两个 datetime 对象相减，就会得到表示该时间间隔的 timedelta 对象。</p>
<p>同样地，将两个时间间隔相减，可以得到另一个 timedelta 对象。</p>
<p>【练习】</p>
<ol>
<li>距离你出生那天过去多少天了？</li>
<li>距离你今年的下一个生日还有多少天？</li>
<li><p>将距离你今年的下一个生日的天数转换为秒数。</p>
</li>
<li></li>
</ol>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输入</span></span><br><span class="line">bday = <span class="string">'Oct 2, 1969'</span></span><br></pre></td></tr></tbody></table></figure>
<p>【参考答案】</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dateutil <span class="keyword">import</span> parser</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">bDay = <span class="string">'Oct 2, 1969'</span></span><br><span class="line">dt1 = parser.parse(bDay).date()</span><br><span class="line">dt2 = datetime.date.today()</span><br><span class="line">dt3 = datetime.date(dt2.year, dt1.month, dt1.day)</span><br><span class="line">print(dt1)  <span class="comment"># 1969-10-02</span></span><br><span class="line">print(dt2)  <span class="comment"># 2020-07-01</span></span><br><span class="line">print(dt3)  <span class="comment"># 2020-10-02</span></span><br><span class="line"></span><br><span class="line">td = dt2 - dt1</span><br><span class="line">print(td.days)  <span class="comment"># 18535</span></span><br><span class="line">td = dt3 - dt2</span><br><span class="line">print(td.days)  <span class="comment"># 93</span></span><br><span class="line">print(td.days * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>)  <span class="comment"># 8035200</span></span><br><span class="line">print(td.total_seconds())  <span class="comment"># 8035200.0</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>1969-10-02
2020-08-06
2020-10-02
18571
57
4924800
4924800.0
</code></pre><h1 id="参考文献："><a href="#参考文献：" class="headerlink" title="参考文献："></a><b>参考文献：</b></h1><ul>
<li><a href="https://www.runoob.com/python3/python3-tutorial.html" target="_blank" rel="noopener">https://www.runoob.com/python3/python3-tutorial.html</a></li>
<li><a href="https://www.bilibili.com/video/av4050443" target="_blank" rel="noopener">https://www.bilibili.com/video/av4050443</a></li>
<li><p><a href="https://blog.csdn.net/u010820857/article/details/85330778" target="_blank" rel="noopener">https://blog.csdn.net/u010820857/article/details/85330778</a></p>
</li>
<li><p><a href="https://www.runoob.com/python3/python3-tutorial.html" target="_blank" rel="noopener">https://www.runoob.com/python3/python3-tutorial.html</a></p>
</li>
<li><a href="https://www.bilibili.com/video/av4050443" target="_blank" rel="noopener">https://www.bilibili.com/video/av4050443</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/18/python-re/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/18/python-re/" class="post-title-link" itemprop="url">python-正则-re</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-18 14:35:00" itemprop="dateCreated datePublished" datetime="2020-07-18T14:35:00+08:00">2020-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-01 23:40:08" itemprop="dateModified" datetime="2020-09-01T23:40:08+08:00">2020-09-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/18/python-re/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/18/python-re/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>4.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<p>[TOC]</p>
<h2 id="re-模块简介"><a href="#re-模块简介" class="headerlink" title="re 模块简介"></a>re 模块简介</h2><p><strong>手写加强理解和记忆</strong></p>
<h3 id="1-查找第一个匹配串"><a href="#1-查找第一个匹配串" class="headerlink" title="1 查找第一个匹配串"></a>1 查找第一个匹配串</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'i love python very much'</span></span><br><span class="line">pat = <span class="string">'python'</span> </span><br><span class="line">r = re.search(pat,s)</span><br><span class="line">print(r.span()) <span class="comment">#(7,13)</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>(7, 13)
</code></pre><h3 id="查找所有1"><a href="#查找所有1" class="headerlink" title="查找所有1"></a>查找所有1</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'山东省潍坊市青州第1中学高三1班'</span></span><br><span class="line">pat = <span class="string">'1'</span></span><br><span class="line">r = re.finditer(pat,s)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> r:</span><br><span class="line">    print(i)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;re.Match object; span=(9, 10), match='1'&gt;
&lt;re.Match object; span=(14, 15), match='1'&gt;
</code></pre><h3 id="d匹配数字-0-9"><a href="#d匹配数字-0-9" class="headerlink" title="\d匹配数字[0-9]"></a>\d匹配数字[0-9]</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'一共20行代码运行时间13.59s'</span></span><br><span class="line">pat = <span class="string">r'\d+'</span> <span class="comment"># +表示匹配数字(\d表示数字的通用字符)1次或多次</span></span><br><span class="line">r = re.findall(pat,s)</span><br><span class="line">print(r)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['20', '13', '59']
</code></pre><h3 id="4-表示前一个字符匹配0或1次"><a href="#4-表示前一个字符匹配0或1次" class="headerlink" title="4 ?表示前一个字符匹配0或1次"></a>4 ?表示前一个字符匹配0或1次</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'一共20行代码运行时间13.59s'</span></span><br><span class="line">pat = <span class="string">r'\d+\.?\d+'</span> <span class="comment"># ?表示匹配小数点(\.)0次或1次</span></span><br><span class="line">r = re.findall(pat,s)</span><br><span class="line">print(r)</span><br><span class="line"><span class="comment"># ['20', '13.59']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['20', '13.59']
</code></pre><h3 id="5-匹配字符串的开头"><a href="#5-匹配字符串的开头" class="headerlink" title="5 ^匹配字符串的开头"></a>5 ^匹配字符串的开头</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'^[emrt]'</span> <span class="comment"># 查找以</span></span><br><span class="line">r = re.findall(pat,s)</span><br><span class="line">print(r)</span><br><span class="line"><span class="comment"># [],因为字符串的开头是字符`T`，不在emrt匹配范围内，所以返回为空</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>[]
</code></pre><h3 id="6-re-I-忽略大小写"><a href="#6-re-I-忽略大小写" class="headerlink" title="6 re.I 忽略大小写"></a>6 re.I 忽略大小写</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'^[emrt]'</span> <span class="comment"># 查找以</span></span><br><span class="line">r = re.compile(pat,re.I).search(s)</span><br><span class="line">print(r)</span><br><span class="line"><span class="comment"># &lt;re.Match object; span=(0, 1), match='T'&gt; 表明字符串的开头在匹配列表</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;re.Match object; span=(0, 1), match='T'&gt;
</code></pre><h3 id="9-补充上第一个单词"><a href="#9-补充上第一个单词" class="headerlink" title="9 补充上第一个单词"></a>9 补充上第一个单词</h3><p>上面第8，看到提取单词中未包括第一个单词，使用?表示前面字符出现0次或1次，但是此字符还有表示贪心或非贪心匹配含义，使用时要谨慎。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'\s?([a-zA-Z]+)'</span>  </span><br><span class="line">r = re.findall(pat,s)</span><br><span class="line">print(r) <span class="comment">#['This', 'module', 'provides', 'regular', 'expression', 'matching', 'operations', 'similar', 'to', 'those', 'found', 'in', 'Perl']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['This', 'module', 'provides', 'regular', 'expression', 'matching', 'operations', 'similar', 'to', 'those', 'found', 'in', 'Perl']
</code></pre><h3 id="10-使用split函数直接分割单词"><a href="#10-使用split函数直接分割单词" class="headerlink" title="10 使用split函数直接分割单词"></a>10 使用split函数直接分割单词</h3><p>使用以上方法分割单词，不是简洁的，仅仅为了演示。分割单词最简单还是使用split函数</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'\s+'</span>  </span><br><span class="line">r = re.split(pat,s)</span><br><span class="line">print(r) <span class="comment"># ['This', 'module', 'provides', 'regular', 'expression', 'matching', 'operations', 'similar', 'to', 'those', 'found', 'in', 'Perl']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['This', 'module', 'provides', 'regular', 'expression', 'matching', 'operations', 'similar', 'to', 'those', 'found', 'in', 'Perl']
</code></pre><h3 id="11-提取以m或t开头的单词，忽略大小写"><a href="#11-提取以m或t开头的单词，忽略大小写" class="headerlink" title="11 提取以m或t开头的单词，忽略大小写"></a>11 提取以m或t开头的单词，忽略大小写</h3><p>下面出现的结果不是我们想要的，原因出在 ?上！</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'\s?([mt][a-zA-Z]*)'</span> <span class="comment"># 查找以</span></span><br><span class="line">r = re.findall(pat,s)</span><br><span class="line">print(r) <span class="comment"># ['module', 'matching', 'tions', 'milar', 'to', 'those']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['module', 'matching', 'tions', 'milar', 'to', 'those']
</code></pre><h3 id="12-使用-查找字符串开头的单词"><a href="#12-使用-查找字符串开头的单词" class="headerlink" title="12 使用^查找字符串开头的单词"></a>12 使用^查找字符串开头的单词</h3><p>综合11和12得到所有以m或t开头的单词</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">'This module provides regular expression matching operations similar to those found in Perl'</span></span><br><span class="line">pat = <span class="string">r'^([mt][a-zA-Z]*)\s'</span> <span class="comment"># 查找以</span></span><br><span class="line">r = re.compile(pat,re.I).findall(s)</span><br><span class="line">print(r) <span class="comment"># ['This']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['This']
</code></pre><h3 id="13-先分割，再查找满足要求的单词"><a href="#13-先分割，再查找满足要求的单词" class="headerlink" title="13 先分割，再查找满足要求的单词"></a>13 先分割，再查找满足要求的单词</h3><p>使用match表示是否匹配</p>
<h3 id="14-贪心匹配"><a href="#14-贪心匹配" class="headerlink" title="14 贪心匹配"></a>14 贪心匹配</h3><p>尽可能多的匹配字符</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">content=<span class="string">'&lt;h&gt;ddedadsad&lt;/h&gt;&lt;div&gt;graph&lt;/div&gt;bb&lt;div&gt;math&lt;/div&gt;cc'</span></span><br><span class="line">pat=re.compile(<span class="string">r"&lt;div&gt;(.*)&lt;/div&gt;"</span>)  <span class="comment">#贪婪模式</span></span><br><span class="line">m=pat.findall(content)</span><br><span class="line">print(m) <span class="comment"># ['graph&lt;/div&gt;bb&lt;div&gt;math']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['graph&lt;/div&gt;bb&lt;div&gt;math']
</code></pre><h3 id="15-非贪心匹配"><a href="#15-非贪心匹配" class="headerlink" title="15 非贪心匹配"></a>15 非贪心匹配</h3><p>与14相比，仅仅多了一个问号(?)，得到结果完全不同。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">content=<span class="string">'&lt;h&gt;ddedadsad&lt;/h&gt;&lt;div&gt;graph&lt;/div&gt;bb&lt;div&gt;math&lt;/div&gt;cc'</span></span><br><span class="line">pat=re.compile(<span class="string">r"&lt;div&gt;(.*?)&lt;/div&gt;"</span>)  <span class="comment">#贪婪模式</span></span><br><span class="line">m=pat.findall(content)</span><br><span class="line">print(m) <span class="comment"># ['graph', 'math']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>['graph', 'math']
</code></pre><p>与14比较可知，贪心匹配和非贪心匹配的区别，后者是字符串匹配后立即返回，见好就收。</p>
<h3 id="16-含有多种分割符"><a href="#16-含有多种分割符" class="headerlink" title="16 含有多种分割符"></a>16 含有多种分割符</h3><p>使用split函数</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">content = <span class="string">'graph math,,english;chemistry'</span> <span class="comment"># 这种</span></span><br><span class="line">pat=re.compile(<span class="string">r"[\s\,\;]+"</span>)  <span class="comment">#贪婪模式</span></span><br><span class="line">print(pat)</span><br><span class="line">m=pat.split(content)</span><br><span class="line">print(m) <span class="comment"># ['graph', 'math', 'english', 'chemistry']</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>re.compile('[\\s\\,\\;]+')
['graph', 'math', 'english', 'chemistry']
</code></pre><h3 id="17-替换匹配的子串"><a href="#17-替换匹配的子串" class="headerlink" title="17 替换匹配的子串"></a>17 替换匹配的子串</h3><p>sub函数实现对匹配子串的替换</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">content=<span class="string">"hello 12345, hello 456321"</span>    </span><br><span class="line">pat=re.compile(<span class="string">r'\d+'</span>) <span class="comment">#要替换的部分</span></span><br><span class="line">m=pat.sub(<span class="string">"666"</span>,content)</span><br><span class="line">print(m) <span class="comment"># hello 666, hello 666</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>hello 666, hello 666
</code></pre><h3 id="18-爬取百度首页标题"><a href="#18-爬取百度首页标题" class="headerlink" title="18 爬取百度首页标题"></a>18 爬取百度首页标题</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="comment">#爬虫爬取百度首页内容</span></span><br><span class="line">data=request.urlopen(<span class="string">"http://www.baidu.com/"</span>).read().decode()</span><br><span class="line"></span><br><span class="line"><span class="comment">#分析网页,确定正则表达式</span></span><br><span class="line">pat=<span class="string">r'&lt;title&gt;(.*?)&lt;/title&gt;'</span></span><br><span class="line"></span><br><span class="line">result=re.search(pat,data)</span><br><span class="line">print(result) <span class="comment"># &lt;re.Match object; span=(1358, 1382), match='&lt;title&gt;百度一下，你就知道&lt;/title&gt;'&gt;</span></span><br><span class="line"></span><br><span class="line">result.group() <span class="comment"># 百度一下，你就知道</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;re.Match object; span=(940, 964), match='&lt;title&gt;百度一下，你就知道&lt;/title&gt;'&gt;

'&lt;title&gt;百度一下，你就知道&lt;/title&gt;'
</code></pre><p>2</p>
<h3 id="19-常用元字符总结"><a href="#19-常用元字符总结" class="headerlink" title="19 常用元字符总结"></a>19 常用元字符总结</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>匹配任意字符</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串始位置</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串中结束的位置</td>
</tr>
<tr>
<td>*</td>
<td>前面的原子重复0次1次多次</td>
</tr>
<tr>
<td>?</td>
<td>前面的原子重复一次或者0次</td>
</tr>
<tr>
<td>+</td>
<td>前面的原子重复一次或多次</td>
</tr>
<tr>
<td>{n}</td>
<td>前面的原子出现了 n 次</td>
</tr>
<tr>
<td>{n,}</td>
<td>前面的原子至少出现 n 次</td>
</tr>
<tr>
<td>{n,m}</td>
<td>前面的原子出现次数介于 n-m 之间</td>
</tr>
<tr>
<td>( )</td>
<td>分组,需要输出的部分</td>
</tr>
</tbody>
</table>
</div>
<h3 id="20-常用通用字符总结"><a href="#20-常用通用字符总结" class="headerlink" title="20 常用通用字符总结"></a>20 常用通用字符总结</h3><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>\s</td>
<td>匹配空白字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配任意字母/数字/下划线</td>
</tr>
<tr>
<td>\W</td>
<td>和小写 w 相反，匹配任意字母/数字/下划线以外的字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配十进制数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配除了十进制数以外的值</td>
</tr>
<tr>
<td>[0-9]</td>
<td>匹配一个0-9之间的数字</td>
</tr>
<tr>
<td>[a-z]</td>
<td>匹配小写英文字母</td>
</tr>
<tr>
<td>[A-Z]</td>
<td>匹配大写英文字母</td>
</tr>
</tbody>
</table>
</div>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p>简说python公众号</p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/18/python-zip-map-mapping-enumerate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/18/python-zip-map-mapping-enumerate/" class="post-title-link" itemprop="url">python-zip-map-enumerate</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-18 14:35:00" itemprop="dateCreated datePublished" datetime="2020-07-18T14:35:00+08:00">2020-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-01 23:39:21" itemprop="dateModified" datetime="2020-09-01T23:39:21+08:00">2020-09-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/18/python-zip-map-mapping-enumerate/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/18/python-zip-map-mapping-enumerate/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>8.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<p>[TOC]</p>
<h2 id="zip-map-enumerate"><a href="#zip-map-enumerate" class="headerlink" title="zip-map-enumerate"></a>zip-map-enumerate</h2><ul>
<li><p>先重温一下迭代（Iteration）、迭代器对象（iterable）、迭代器（iterator ）的概念：</p>
</li>
<li><p>Iteration是计算机科学的通用术语，它是指对一组元素执行一项操作，一次执行一个元素。一个很好的例子是循环 - 它适用于每个单独的项目，直到整个项目集运行完毕为止。</p>
</li>
<li><p>Iterable是可以遍历的对象（译者注：在Python中所有东西都是object, 比如说变量，容器，类），iterable是可以产生iterator的object。</p>
</li>
<li><p>iterator是表示数据流的对象，它一次返回一个元素的数据。它还会记住其在迭代过程中的位置。本质上，它控制应如何迭代可迭代对象。</p>
</li>
</ul>
<h3 id="zip-的作用"><a href="#zip-的作用" class="headerlink" title="zip()的作用"></a>zip()的作用</h3><p>先看一下语法：</p>
<p><code>zip(iter1 [,iter2 [...]]) —&gt; zip object</code><br>Python的内置help()模块提供了一个简短但又有些令人困惑的解释：</p>
<p>返回一个元组迭代器，其中第i个元组包含每个参数序列或可迭代对象中的第i个元素。当最短的可迭代输入耗尽时，迭代器将停止。使用单个可迭代参数，它将返回1元组的迭代器。没有参数，它将返回一个空的迭代器。</p>
<p>与往常一样，当您精通更一般的计算机科学和Python概念时，此模块非常有用。但是，对于初学者来说，这段话只会引发更多问题。让我们尝试通过示例，代码片段和可视化来解释zip()功能：从许多迭代中获取元素，然后…… 放在一起</p>
<p><strong>我们可以通过几个列表来演示zip()的功能：</strong></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uppercase = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]</span><br><span class="line">lowercase = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y <span class="keyword">in</span> zip(uppercase, lowercase):</span><br><span class="line">    print(x, y)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>A a
B b
C c
</code></pre><p>但是，不限于两个可迭代对象作为参数传递-我们可以添加任意多个：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uppercase = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]</span><br><span class="line">lowercase = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y, z <span class="keyword">in</span> zip(uppercase, lowercase, numbers):</span><br><span class="line">    print(x, y, z)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>A a 1
B b 2
C c 3
</code></pre><p>zip()函数的另一个重要警告是如果各个迭代器的元素个数不一致，则返回列表长度与最短的对象相同：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uppercase = [<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>]</span><br><span class="line">lowercase = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>]</span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x, y, z <span class="keyword">in</span> zip(uppercase, lowercase, numbers):</span><br><span class="line">    print(x, y, z)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>A a 1
B b 2
C c 3
</code></pre><p>正如我们所看到的，即使列出了三个三元组，uppercase和lowercase列表具有5和4个元素。</p>
<p>要知道的重要一件事是zip()函数返回什么。</p>
<p>尽管似乎在调用此函数时会得到一个列表，但实际上它返回一个称为zip object的特殊数据类型，这意味着使用索引将无法浏览，下面我们学习如何将其转换为其他数据类型（例如列表）。</p>
<p>在此之前，我们还应再来学习一下迭代（Iteration）、迭代器对象（iterable）、迭代器（iterator ）的概念：</p>
<p>Iteration是计算机科学的通用术语。它是指对一组元素执行一项操作，一次执行一个元素。一个很好的例子是循环 -它适用于每个单独的项目，直到整个项目集运行完毕为止。<br>Iterable是可以遍历的对象（译者注：在Python中所有东西都是object, 比如说变量，容器，类），iterable是可以产生iterator的object。<br>iterator是表示数据流的对象，它一次返回一个元素的数据。它还会记住其在迭代过程中的位置。本质上，它控制应如何迭代可迭代对象。</p>
<h4 id="将zip-对象转换为列表（并使用索引）"><a href="#将zip-对象转换为列表（并使用索引）" class="headerlink" title="将zip()对象转换为列表（并使用索引）"></a>将zip()对象转换为列表（并使用索引）</h4><p>zip()函数返回一个zip对象（类似于map()操作方式）。</p>
<p>zip对象提供了一些有趣的功能（迭代速度比list更快），但是我们经常需要将其转换为list。为了做到这一点，我们需要调用list()函数：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">b = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">c = [<span class="string">"leopard"</span>, <span class="string">"cheetah"</span>, <span class="string">"jaguar"</span>]</span><br><span class="line"></span><br><span class="line">print(list(zip(b, c)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[('red', 'leopard'), ('green', 'cheetah'), ('blue', 'jaguar')]
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">b = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">c = [<span class="string">"leopard"</span>, <span class="string">"cheetah"</span>, <span class="string">"jaguar"</span>]</span><br><span class="line">new_list = list(zip(b, c))</span><br><span class="line">print(new_list[<span class="number">0</span>])</span><br><span class="line">print(new_list[<span class="number">1</span>])</span><br><span class="line">print(new_list[<span class="number">2</span>])</span><br></pre></td></tr></tbody></table></figure>
<pre><code>('red', 'leopard')
('green', 'cheetah')
('blue', 'jaguar')
</code></pre><h4 id="将zip-对象转换成字典"><a href="#将zip-对象转换成字典" class="headerlink" title="将zip()对象转换成字典"></a>将zip()对象转换成字典</h4><p>另外，该dict()函数可用于将zip对象转换为字典。需要注意的是，只能使用两个zip()参数-前者产生key，后者产生value：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">b = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">f = [<span class="string">"strawberry"</span>, <span class="string">"kiwi"</span>, <span class="string">"blueberry"</span>]</span><br><span class="line">print(dict(zip(b, f)))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>{'red': 'strawberry', 'green': 'kiwi', 'blue': 'blueberry'}
</code></pre><h4 id="解压列表"><a href="#解压列表" class="headerlink" title="解压列表"></a>解压列表</h4><p>在某些情况下，我们需要执行相反的操作——解压迭代器。解压操作涉及将压缩后的元素恢复为其原始状态。为此，我们添加<code>*</code>运算符到函数调用中。例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</span><br><span class="line">zipped = zip(a, b)</span><br><span class="line">list(zipped)</span><br><span class="line"></span><br><span class="line">a2, b2 = zip(*zip(a, b))</span><br><span class="line">print(a == list(a2) <span class="keyword">and</span> b == list(b2))</span><br></pre></td></tr></tbody></table></figure>
<pre><code>True
</code></pre><h4 id="Zip与列表生成式（for循环潜在问题）"><a href="#Zip与列表生成式（for循环潜在问题）" class="headerlink" title="Zip与列表生成式（for循环潜在问题）"></a>Zip与列表生成式（for循环潜在问题）</h4><p>zip（）函数与Python中的for循环一起使用的可视化</p>
<p>在应用for循环后注意缺少的元素！</p>
<p>Python的另一个很棒的功能——列表推导式，可以与zip()函数结合使用。表面上看起来很简单……</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">m = [<span class="string">"mind"</span>, <span class="string">"mouse"</span>, <span class="string">"mini"</span>]</span><br><span class="line">n = [<span class="string">"norm"</span>, <span class="string">"night"</span>, <span class="string">"necklace"</span>]</span><br><span class="line"></span><br><span class="line">[print(a, b) <span class="keyword">for</span> a, b <span class="keyword">in</span> zip(m, n)]</span><br></pre></td></tr></tbody></table></figure>
<pre><code>mind norm
mouse night
mini necklace

[None, None, None]
</code></pre><h3 id="enumerate"><a href="#enumerate" class="headerlink" title="enumerate()"></a>enumerate()</h3><h4 id="枚举字符串"><a href="#枚举字符串" class="headerlink" title="枚举字符串"></a>枚举字符串</h4><p>字符串只是一个列表</p>
<p>为了更好地理解字符串枚举，我们可以将给定的字符串想象为单个字符（项）的集合。因此，枚举字符串将为我们提供：</p>
<p>1.字符的索引。2.字符的值。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">word = <span class="string">"Speed"</span></span><br><span class="line"><span class="keyword">for</span> index, char <span class="keyword">in</span> enumerate(word):</span><br><span class="line">    print(<span class="string">f"The index is '<span class="subst">{index}</span>' and the character value is '<span class="subst">{char}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>The index is '0' and the character value is 'S'
The index is '1' and the character value is 'p'
The index is '2' and the character value is 'e'
The index is '3' and the character value is 'e'
The index is '4' and the character value is 'd'
</code></pre><h4 id="列举列表"><a href="#列举列表" class="headerlink" title="列举列表"></a>列举列表</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sports = [<span class="string">'soccer'</span>, <span class="string">'basketball'</span>, <span class="string">'t`  ennis'</span>]</span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(sports):</span><br><span class="line">    print(<span class="string">f"The item's index is <span class="subst">{index}</span> and its value is '<span class="subst">{value}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>The item's index is 0 and its value is 'soccer'
The item's index is 1 and its value is 'basketball'
The item's index is 2 and its value is 't`  ennis'
</code></pre><h4 id="自定义起始索引"><a href="#自定义起始索引" class="headerlink" title="自定义起始索引"></a>自定义起始索引</h4><p>我们可以看到枚举从索引0开始，但是们经常需要更改起始位置，以实现更多的可定制性。值得庆幸的是，enumerate（）还带有一个可选参数[start]<br><code>enumerate(iterable, start=0)</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">students = [<span class="string">'John'</span>, <span class="string">'Jane'</span>, <span class="string">'J-Bot 137'</span>]  </span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> enumerate(students, start=<span class="number">1</span>):</span><br><span class="line">    print(<span class="string">f"The index is <span class="subst">{index}</span> and the list element is '<span class="subst">{item}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>The index is 1 and the list element is 'John'
The index is 2 and the list element is 'Jane'
The index is 3 and the list element is 'J-Bot 137'
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">teachers = [<span class="string">'Mary'</span>, <span class="string">'Mark'</span>, <span class="string">'Merlin'</span>]</span><br><span class="line"><span class="keyword">for</span> index, item <span class="keyword">in</span> enumerate(teachers, <span class="number">-5</span>):</span><br><span class="line">    print(<span class="string">f"The index is <span class="subst">{index}</span> and the list element is '<span class="subst">{item}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>The index is -5 and the list element is 'Mary'
The index is -4 and the list element is 'Mark'
The index is -3 and the list element is 'Merlin'
</code></pre><h4 id="枚举元组"><a href="#枚举元组" class="headerlink" title="枚举元组"></a>枚举元组</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">colors = (<span class="string">'red'</span>, <span class="string">'green'</span>, <span class="string">'blue'</span>)</span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(colors):</span><br><span class="line">    print(<span class="string">f"The item's index is <span class="subst">{index}</span> and its value is '<span class="subst">{value}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>The item's index is 0 and its value is 'red'
The item's index is 1 and its value is 'green'
The item's index is 2 and its value is 'blue'
</code></pre><h4 id="枚举列表中的元组"><a href="#枚举列表中的元组" class="headerlink" title="枚举列表中的元组"></a>枚举列表中的元组</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">letters = [(<span class="string">'a'</span>, <span class="string">'A'</span>), (<span class="string">'b'</span>, <span class="string">'B'</span>), (<span class="string">'c'</span>, <span class="string">'C'</span>)]</span><br><span class="line"><span class="keyword">for</span> index, value <span class="keyword">in</span> enumerate(letters):</span><br><span class="line">    lowercase = value[<span class="number">0</span>]</span><br><span class="line">    uppercase = value[<span class="number">1</span>]</span><br><span class="line">    print(<span class="string">f"Index '<span class="subst">{index}</span>' refers to the letters '<span class="subst">{lowercase}</span>' and '<span class="subst">{uppercase}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Index '0' refers to the letters 'a' and 'A'
Index '1' refers to the letters 'b' and 'B'
Index '2' refers to the letters 'c' and 'C'
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">letters = [(<span class="string">'a'</span>, <span class="string">'A'</span>), (<span class="string">'b'</span>, <span class="string">'B'</span>), (<span class="string">'c'</span>, <span class="string">'C'</span>)]</span><br><span class="line"><span class="keyword">for</span> i, (lowercase, uppercase) <span class="keyword">in</span> enumerate(letters):</span><br><span class="line">    print(<span class="string">f"Index '<span class="subst">{i}</span>' refers to the letters '<span class="subst">{lowercase}</span>' and '<span class="subst">{uppercase}</span>'"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>Index '0' refers to the letters 'a' and 'A'
Index '1' refers to the letters 'b' and 'B'
Index '2' refers to the letters 'c' and 'C'
</code></pre><h4 id="枚举字典"><a href="#枚举字典" class="headerlink" title="枚举字典"></a>枚举字典</h4><p>枚举字典似乎类似于枚举字符串或列表，但事实并非如此，主要区别在于它们的顺序结构，即特定数据结构中元素的排序方式。</p>
<p>字典有些随意，因为它们的项的顺序是不可预测的。如果我们创建字典并打印它，我们将得到一种结果：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">animals = {<span class="string">'cat'</span>: <span class="number">3</span>, <span class="string">'dog'</span>: <span class="number">6</span>, <span class="string">'bird'</span>: <span class="number">9</span>}</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> animals.items():</span><br><span class="line">    print(key, value)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>cat 3
dog 6
bird 9
</code></pre><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">animals = {<span class="string">'cat'</span>: <span class="number">3</span>, <span class="string">'dog'</span>: <span class="number">6</span>, <span class="string">'bird'</span>: <span class="number">9</span>}</span><br><span class="line"><span class="keyword">for</span> i, j <span class="keyword">in</span> enumerate(animals):</span><br><span class="line">    print(i,j)</span><br><span class="line">    print(j)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>0 cat
cat
1 dog
dog
2 bird
bird
</code></pre><h3 id="map（）的用法"><a href="#map（）的用法" class="headerlink" title="map（）的用法"></a>map（）的用法</h3><p>map()函数以迭代的方式将提供的功能应用于每个项目，结果是作为迭代器的map对象。语法：</p>
<p><code>map(func, *iterables)</code></p>
<p>如果没有map()，我们将不得不编写复杂的代码以在多个项目上“循环”给定的函数。以一个整洁的小实验为例：我们有一个10个单词的列表。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">test_list = [<span class="string">"effort"</span>, <span class="string">"circle"</span>, <span class="string">"yearly"</span>, <span class="string">"woolen"</span>, <span class="string">"accept"</span>, <span class="string">"lurker"</span>,</span><br><span class="line">            <span class="string">"island"</span>, <span class="string">"faucet"</span>, <span class="string">"glossy"</span>, <span class="string">"evader"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">is_abecedarian</span><span class="params">(input_word)</span>:</span></span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> letter <span class="keyword">in</span> input_word[<span class="number">0</span>:<span class="number">-1</span>]:</span><br><span class="line">        <span class="keyword">if</span> ord(input_word[index]) &gt; ord(input_word[index + <span class="number">1</span>]):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            index += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="comment"># 现在，我们想将函数应用于单词列表，并创建一个将包含True和False值的新列表，以表明某些单词是否确实是abcderian。</span></span><br><span class="line"><span class="comment"># 下面方法涉及初始化一个新列表，然后使用for循环遍历列表元素</span></span><br><span class="line">value_list = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> test_list:</span><br><span class="line">    value = is_abecedarian(item)</span><br><span class="line">    value_list.append(value)</span><br><span class="line">print(value_list)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>[True, False, False, False, True, False, False, False, True, False]
</code></pre><p>映射操作(map)：一种遍历一个序列并对每个元素执行操作的处理模式。</p>
<p>映射(mapping)：一个集合中的每个元素对应另一个集合中的一个元素的关系</p>
<p>将map（）转换为列表，元组和集合<br>由于map()不返回列表/元组/集合，因此我们需要采取额外的步骤来转换生成的map对象：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">capitalize_word</span><span class="params">(input_word)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> input_word.capitalize()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">map_object = map(capitalize_word, [<span class="string">'strength'</span>, <span class="string">'agility'</span>, <span class="string">'intelligence'</span>])</span><br><span class="line">test_list = list(map_object)</span><br><span class="line">print(test_list)</span><br><span class="line"></span><br><span class="line">map_object = map(capitalize_word, [<span class="string">'health'</span>, <span class="string">'mana'</span>, <span class="string">'gold'</span>])</span><br><span class="line">test_set = set(map_object)</span><br><span class="line">print(test_set)</span><br><span class="line"></span><br><span class="line">map_object = map(capitalize_word, [<span class="string">'armor'</span>, <span class="string">'weapon'</span>, <span class="string">'spell'</span>])</span><br><span class="line">test_tuple = tuple(map_object)</span><br><span class="line">print(test_tuple)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>['Strength', 'Agility', 'Intelligence']
{'Mana', 'Health', 'Gold'}
('Armor', 'Weapon', 'Spell')
</code></pre><h4 id="将map（）与Lambda表达式结合"><a href="#将map（）与Lambda表达式结合" class="headerlink" title="将map（）与Lambda表达式结合"></a>将map（）与Lambda表达式结合</h4><p>Lambda表达式是对我们的工具库的一个很好的补充：将Lambda表达式与map()代码相结合可使您的Python程序更小，更精确。</p>
<p>Lambda表达式可以创建匿名函数，即未约定特定标识符的函数。相反，通过def关键字创建函数会将函数绑定到其唯一标识符（例如def my_function创建标识符my_function）。</p>
<p>但是，lambda表达式也有一系列限制：它们每个只能做一件事情，只能在一个地方使用，通常与其他功能结合使用。我们看看lambda表达式如何map()同时使用：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cities = [<span class="string">"caracas"</span>, <span class="string">"bern"</span>, <span class="string">"oslo"</span>, <span class="string">"ottawa"</span>, <span class="string">"bangkok"</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">capitalize_word</span><span class="params">(input_word)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> input_word.capitalize()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">capitalized_cities = map(capitalize_word, cities)</span><br></pre></td></tr></tbody></table></figure>
<p>需要注意：map()和lambda表达式提供了凝聚多行代码成一行的能力。尽管此功能非常出色，但我们需要牢记编程的黄金法则之一：代码读取比写入更频繁。这意味着map()和lambda表达式都可以提高代码的简洁性，但是却牺牲了代码的清晰度。遗憾的是，对于代码的可读性，实际上并没有明确的指导方针- 随着编程经验的增长，大家将逐渐明白这一点。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cities = [<span class="string">"caracas"</span>, <span class="string">"bern"</span>, <span class="string">"oslo"</span>, <span class="string">"ottawa"</span>, <span class="string">"bangkok"</span>]</span><br><span class="line"></span><br><span class="line">capitalized_cities = map(<span class="keyword">lambda</span> s: s.capitalize(), cities)</span><br></pre></td></tr></tbody></table></figure>
<h4 id="使用map（）遍历字典"><a href="#使用map（）遍历字典" class="headerlink" title="使用map（）遍历字典"></a>使用map（）遍历字典</h4><p>map()也非常适合遍历字典</p>
<p>假设有一个包含苹果，梨和樱桃价格的字典，我们需要通过应用15％的折扣来更新价格表。方法如下：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">price_list = {</span><br><span class="line">    <span class="string">"pear"</span>: <span class="number">0.60</span>,</span><br><span class="line">    <span class="string">"cherries"</span>: <span class="number">0.90</span>,</span><br><span class="line">    <span class="string">"apple"</span>: <span class="number">0.35</span>,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">calulates_discount</span><span class="params">(item_price)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> (item_price[<span class="number">0</span>], round(item_price[<span class="number">1</span>] * <span class="number">0.85</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">new_price_list = dict(map(calulates_discount, price_list.items()))</span><br></pre></td></tr></tbody></table></figure>
<h4 id="将map（）与Lambda表达式组合遍历字典"><a href="#将map（）与Lambda表达式组合遍历字典" class="headerlink" title="将map（）与Lambda表达式组合遍历字典"></a>将map（）与Lambda表达式组合遍历字典</h4><p>当开始组合多个功能时，编程特别有趣，一个很好的例子是map()配合使用和lambda表达式来遍历字典。在下面的代码中，我们初始化字典列表，并将每个字典作为参数传递给lambda函数。</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list_of_ds = [{<span class="string">'user'</span>: <span class="string">'Jane'</span>, <span class="string">'posts'</span>: <span class="number">18</span>}, {<span class="string">'user'</span>: <span class="string">'Amina'</span>, <span class="string">'posts'</span>: <span class="number">64</span>}]</span><br><span class="line"></span><br><span class="line">map(<span class="keyword">lambda</span> x: x[<span class="string">'user'</span>], list_of_ds)  <span class="comment"># Output: ['Jane', 'Amina']</span></span><br><span class="line"></span><br><span class="line">map(<span class="keyword">lambda</span> x: x[<span class="string">'posts'</span>] * <span class="number">10</span>, list_of_ds)  <span class="comment"># Output: [180, 640]</span></span><br><span class="line"></span><br><span class="line">map(<span class="keyword">lambda</span> x: x[<span class="string">'user'</span>] == <span class="string">"Jane"</span>, list_of_ds)  <span class="comment"># Output: [True, False]</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>&lt;map at 0x18242a63808&gt;
</code></pre><h4 id="map（）替代方法：列表解析"><a href="#map（）替代方法：列表解析" class="headerlink" title="map（）替代方法：列表解析"></a><code>map（）</code>替代方法：列表解析</h4><p>像所有技术/产品/方法等等一样，一些Python开发人员认为map()函数在某种程度上不是Python风格（即未遵循应如何构建Python程序的精神和设计理念）。他们建议改用列表解析，比如：</p>
<p><code>map(f, iterable)</code><br>变成</p>
<p><code>[f(x) for x in iterable]</code></p>
<p>在速度和性能方面，map()与列表理析大致相等，因此不可能看到执行时间显着减少 </p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/18/hm-python-multi-process-pool/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/18/hm-python-multi-process-pool/" class="post-title-link" itemprop="url">python-multiprocessing.pool-进程池简述</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-18 11:30:00" itemprop="dateCreated datePublished" datetime="2020-07-18T11:30:00+08:00">2020-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-01 23:47:32" itemprop="dateModified" datetime="2020-09-01T23:47:32+08:00">2020-09-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/18/hm-python-multi-process-pool/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/18/hm-python-multi-process-pool/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.7k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<p>[TOC]</p>
<h2 id="进程池Pool"><a href="#进程池Pool" class="headerlink" title="进程池Pool"></a>进程池Pool</h2><p>当需要创建的子进程数量不多时，可以直接利用multiprocessing中的Process动态成生多个进程，但如果是上百甚至上千个目标，手动的去创建进程的工作量巨大，此时就可以用到multiprocessing模块提供的Pool方法。</p>
<p>初始化Pool时，可以指定一个最大进程数，当有新的请求提交到Pool中时，如果池还没有满，那么就会创建一个新的进程用来执行该请求；但如果池中的进程数已经达到指定的最大值，那么该请求就会等待，直到池中有进程结束，才会用之前的进程来执行新的任务，请看下面的实例：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> os, time, random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">worker</span><span class="params">(msg)</span>:</span></span><br><span class="line">    t_start = time.time()</span><br><span class="line">    print(<span class="string">"%s开始执行,进程号为%d"</span> % (msg,os.getpid()))</span><br><span class="line">    <span class="comment"># random.random()随机生成0~1之间的浮点数</span></span><br><span class="line">    time.sleep(random.random()*<span class="number">2</span>) </span><br><span class="line">    t_stop = time.time()</span><br><span class="line">    print(msg,<span class="string">"执行完毕，耗时%0.2f"</span> % (t_stop-t_start))</span><br><span class="line"></span><br><span class="line">po = Pool(<span class="number">3</span>)  <span class="comment"># 定义一个进程池，最大进程数3</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>):</span><br><span class="line">    <span class="comment"># Pool().apply_async(要调用的目标,(传递给目标的参数元祖,))</span></span><br><span class="line">    <span class="comment"># 每次循环将会用空闲出来的子进程去调用目标</span></span><br><span class="line">    po.apply_async(worker,(i,))</span><br><span class="line"></span><br><span class="line">print(<span class="string">"----start----"</span>)</span><br><span class="line">po.close()  <span class="comment"># 关闭进程池，关闭后po不再接收新的请求</span></span><br><span class="line">po.join()  <span class="comment"># 等待po中所有子进程执行完成，必须放在close语句之后</span></span><br><span class="line">print(<span class="string">"-----end-----"</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>----start----
</code></pre><p>——start——<br></p><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>开始执行,进程号为<span class="number">21466</span></span><br><span class="line"><span class="number">1</span>开始执行,进程号为<span class="number">21468</span></span><br><span class="line"><span class="number">2</span>开始执行,进程号为<span class="number">21467</span></span><br><span class="line"><span class="number">0</span> 执行完毕，耗时<span class="number">1.01</span></span><br><span class="line"><span class="number">3</span>开始执行,进程号为<span class="number">21466</span></span><br><span class="line"><span class="number">2</span> 执行完毕，耗时<span class="number">1.24</span></span><br><span class="line"><span class="number">4</span>开始执行,进程号为<span class="number">21467</span></span><br><span class="line"><span class="number">3</span> 执行完毕，耗时<span class="number">0.56</span></span><br><span class="line"><span class="number">5</span>开始执行,进程号为<span class="number">21466</span></span><br><span class="line"><span class="number">1</span> 执行完毕，耗时<span class="number">1.68</span></span><br><span class="line"><span class="number">6</span>开始执行,进程号为<span class="number">21468</span></span><br><span class="line"><span class="number">4</span> 执行完毕，耗时<span class="number">0.67</span></span><br><span class="line"><span class="number">7</span>开始执行,进程号为<span class="number">21467</span></span><br><span class="line"><span class="number">5</span> 执行完毕，耗时<span class="number">0.83</span></span><br><span class="line"><span class="number">8</span>开始执行,进程号为<span class="number">21466</span></span><br><span class="line"><span class="number">6</span> 执行完毕，耗时<span class="number">0.75</span></span><br><span class="line"><span class="number">9</span>开始执行,进程号为<span class="number">21468</span></span><br><span class="line"><span class="number">7</span> 执行完毕，耗时<span class="number">1.03</span></span><br><span class="line"><span class="number">8</span> 执行完毕，耗时<span class="number">1.05</span></span><br><span class="line"><span class="number">9</span> 执行完毕，耗时<span class="number">1.69</span></span><br><span class="line">-----end-----</span><br></pre></td></tr></tbody></table></figure><p></p>
<h3 id="multiprocessing-Pool常用函数解析："><a href="#multiprocessing-Pool常用函数解析：" class="headerlink" title="multiprocessing.Pool常用函数解析："></a>multiprocessing.Pool常用函数解析：</h3><p>apply_async(func[, args[, kwds]]) ：使用非阻塞方式调用func（并行执行，堵塞方式必须等待上一个进程退出才能执行下一个进程），args为传递给func的参数列表，kwds为传递给func的关键字参数列表；<br>close()：关闭Pool，使其不再接受新的任务；<br>terminate()：不管任务是否完成，立即终止；<br>join()：主进程阻塞，等待子进程的退出， 必须在close或terminate之后使用；</p>
<h3 id="进程池中的Queue"><a href="#进程池中的Queue" class="headerlink" title="进程池中的Queue"></a>进程池中的Queue</h3><p>如果要使用Pool创建进程，就需要使用multiprocessing.Manager()中的Queue()，而不是multiprocessing.Queue()，否则会得到一条如下的错误信息：</p>
<p>RuntimeError: Queue objects should only be shared between processes through inheritance.</p>
<p>下面的实例演示了进程池中的进程如何通信：</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改import中的Queue为Manager</span></span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Manager,Pool</span><br><span class="line"><span class="keyword">import</span> os,time,random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reader</span><span class="params">(q)</span>:</span></span><br><span class="line">    print(<span class="string">"reader启动(%s),父进程为(%s)"</span> % (os.getpid(), os.getppid()))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(q.qsize()):</span><br><span class="line">        print(<span class="string">"reader从Queue获取到消息：%s"</span> % q.get(<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writer</span><span class="params">(q)</span>:</span></span><br><span class="line">    print(<span class="string">"writer启动(%s),父进程为(%s)"</span> % (os.getpid(), os.getppid()))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"itcast"</span>:</span><br><span class="line">        q.put(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"(%s) start"</span> % os.getpid())</span><br><span class="line">    q = Manager().Queue()  <span class="comment"># 使用Manager中的Queue</span></span><br><span class="line">    po = Pool()</span><br><span class="line">    po.apply_async(writer, (q,))</span><br><span class="line"></span><br><span class="line">    time.sleep(<span class="number">1</span>)  <span class="comment"># 先让上面的任务向Queue存入数据，然后再让下面的任务开始从中取数据</span></span><br><span class="line"></span><br><span class="line">    po.apply_async(reader, (q,))</span><br><span class="line">    po.close()</span><br><span class="line">    po.join()</span><br><span class="line">    print(<span class="string">"(%s) End"</span> % os.getpid())</span><br></pre></td></tr></tbody></table></figure>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果:"></a>运行结果:</h3><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">11095</span>) start</span><br><span class="line">writer启动(<span class="number">11097</span>),父进程为(<span class="number">11095</span>)</span><br><span class="line">reader启动(<span class="number">11098</span>),父进程为(<span class="number">11095</span>)</span><br><span class="line">reader从Queue获取到消息：i</span><br><span class="line">reader从Queue获取到消息：t</span><br><span class="line">reader从Queue获取到消息：c</span><br><span class="line">reader从Queue获取到消息：a</span><br><span class="line">reader从Queue获取到消息：s</span><br><span class="line">reader从Queue获取到消息：t</span><br><span class="line">(<span class="number">11095</span>) End</span><br></pre></td></tr></tbody></table></figure>
<h3 id="应用：文件夹copy器（多进程版）"><a href="#应用：文件夹copy器（多进程版）" class="headerlink" title="应用：文件夹copy器（多进程版）"></a>应用：文件夹copy器（多进程版）</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy_file</span><span class="params">(queue, file_name,source_folder_name,  dest_folder_name)</span>:</span></span><br><span class="line">    <span class="string">"""copy文件到指定的路径"""</span></span><br><span class="line">    f_read = open(source_folder_name + <span class="string">"/"</span> + file_name, <span class="string">"rb"</span>)</span><br><span class="line">    f_write = open(dest_folder_name + <span class="string">"/"</span> + file_name, <span class="string">"wb"</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        time.sleep(random.random())</span><br><span class="line">        content = f_read.read(<span class="number">1024</span>)</span><br><span class="line">        <span class="keyword">if</span> content:</span><br><span class="line">            f_write.write(content)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    f_read.close()</span><br><span class="line">    f_write.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 发送已经拷贝完毕的文件名字</span></span><br><span class="line">    queue.put(file_name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 获取要复制的文件夹</span></span><br><span class="line">    source_folder_name = input(<span class="string">"请输入要复制文件夹名字:"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 整理目标文件夹</span></span><br><span class="line">    dest_folder_name = source_folder_name + <span class="string">"[副本]"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建目标文件夹</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        os.mkdir(dest_folder_name)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span>  <span class="comment"># 如果文件夹已经存在，那么创建会失败</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取这个文件夹中所有的普通文件名</span></span><br><span class="line">    file_names = os.listdir(source_folder_name)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建Queue</span></span><br><span class="line">    queue = multiprocessing.Manager().Queue()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建进程池</span></span><br><span class="line">    pool = multiprocessing.Pool(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> file_name <span class="keyword">in</span> file_names:</span><br><span class="line">        <span class="comment"># 向进程池中添加任务</span></span><br><span class="line">        pool.apply_async(copy_file, args=(queue, file_name, source_folder_name, dest_folder_name))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 主进程显示进度</span></span><br><span class="line">    pool.close()</span><br><span class="line"></span><br><span class="line">    all_file_num = len(file_names)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        file_name = queue.get()</span><br><span class="line">        <span class="keyword">if</span> file_name <span class="keyword">in</span> file_names:</span><br><span class="line">            file_names.remove(file_name)</span><br><span class="line"></span><br><span class="line">        copy_rate = (all_file_num-len(file_names))*<span class="number">100</span>/all_file_num</span><br><span class="line">        print(<span class="string">"\r%.2f...(%s)"</span> % (copy_rate, file_name) + <span class="string">" "</span>*<span class="number">50</span>, end=<span class="string">""</span>)</span><br><span class="line">        <span class="keyword">if</span> copy_rate &gt;= <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/18/hm-python-multi-task/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/18/hm-python-multi-task/" class="post-title-link" itemprop="url">python-multi-task-多任务</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-18 11:30:00" itemprop="dateCreated datePublished" datetime="2020-07-18T11:30:00+08:00">2020-07-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-01 23:46:08" itemprop="dateModified" datetime="2020-09-01T23:46:08+08:00">2020-09-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/18/hm-python-multi-task/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/18/hm-python-multi-task/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <a id="more"></a>
<p>[TOC]</p>
<h3 id="多任务"><a href="#多任务" class="headerlink" title="多任务"></a>多任务</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在唱歌...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dance</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在跳舞...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    sing() <span class="comment">#唱歌</span></span><br><span class="line">    dance() <span class="comment">#跳舞</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>正在唱歌...0
正在唱歌...1
正在唱歌...2
正在跳舞...0
正在跳舞...1
正在跳舞...2
</code></pre><p>很显然刚刚的程序并没有完成唱歌和跳舞同时进行的要求</p>
<p>如果想要实现“唱歌跳舞”同时进行，那么就需要一个新的方法，叫做：多任务</p>
<h3 id="多任务的概念"><a href="#多任务的概念" class="headerlink" title="多任务的概念"></a>多任务的概念</h3><p>在，多核CPU已经非常普及了，但是，即使过去的单核CPU，也可以执行多任务。由于CPU执行代码都是顺序执行的，那么，单核CPU是怎么执行多任务的呢？</p>
<p>答案就是操作系统轮流让各个任务交替执行，任务1执行0.01秒，切换到任务2，任务2执行0.01秒，再切换到任务3，执行0.01秒……这样反复执行下去。表面上看，每个任务都是交替执行的，但是，由于CPU的执行速度实在是太快了，我们感觉就像所有任务都在同时执行一样。</p>
<p>真正的并行执行多任务只能在多核CPU上实现，但是，由于任务数量远远多于CPU的核心数量，所以，操作系统也会自动把很多任务轮流调度到每个核心上执行。</p>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><ul>
<li><p>并发：指的是任务数多余cpu核数，通过操作系统的各种任务调度算法，实现用多个任务“一起”执行（实际上总有一些任务不在执行，因为切换任务的速度相当快，看上去一起执行而已）</p>
</li>
<li><p>并行：指的是任务数小于等于cpu核数，即任务真的是一起执行的</p>
</li>
</ul>
<h3 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h3><p>python的thread模块是比较底层的模块，python的threading模块是对thread做了一些包装的，可以更加方便的被使用</p>
<h3 id="使用threading模块"><a href="#使用threading模块" class="headerlink" title="使用threading模块"></a>使用threading模块</h3><h4 id="单线程执行"><a href="#单线程执行" class="headerlink" title="单线程执行"></a>单线程执行</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saySorry</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"吃饭了吗？"</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        saySorry()</span><br></pre></td></tr></tbody></table></figure>
<pre><code>吃饭了吗？
吃饭了吗？
吃饭了吗？
吃饭了吗？
吃饭了吗？
</code></pre><h4 id="多线程执行"><a href="#多线程执行" class="headerlink" title="多线程执行"></a>多线程执行</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saySorry</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"我错了吗？"</span>)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        t = threading.Thread(target=saySorry)</span><br><span class="line">        t.start() <span class="comment">#启动线程，即让线程开始执行</span></span><br></pre></td></tr></tbody></table></figure>
<pre><code>我错了吗？
我错了吗？我错了吗？

我错了吗？
我错了吗？
</code></pre><h5 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h5><ul>
<li>可以明显看出使用了多线程并发的操作，花费时间要短很多</li>
<li>当调用start()时，才会真正的创建线程，并且开始执行</li>
</ul>
<h3 id="主线程会等待所有的子线程结束后才结束"><a href="#主线程会等待所有的子线程结束后才结束" class="headerlink" title="主线程会等待所有的子线程结束后才结束"></a>主线程会等待所有的子线程结束后才结束</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep,ctime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在唱歌...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dance</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在跳舞...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(<span class="string">'---开始---:%s'</span>%ctime())</span><br><span class="line"></span><br><span class="line">    t1 = threading.Thread(target=sing)</span><br><span class="line">    t2 = threading.Thread(target=dance)</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    <span class="comment">#sleep(5) # 屏蔽此行代码，试试看，程序是否会立马结束？</span></span><br><span class="line">    print(<span class="string">'---结束---:%s'</span>%ctime())</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---开始---:Thu Jul  9 21:28:57 2020
正在唱歌...0
正在跳舞...0---结束---:Thu Jul  9 21:28:57 2020

正在唱歌...1正在跳舞...1

正在跳舞...2正在唱歌...2
</code></pre><p>​    </p>
<h3 id="查看线程数量"><a href="#查看线程数量" class="headerlink" title="查看线程数量"></a>查看线程数量</h3><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep,ctime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sing</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在唱歌...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dance</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">        print(<span class="string">"正在跳舞...%d"</span>%i)</span><br><span class="line">        sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(<span class="string">'---开始---:%s'</span>%ctime())</span><br><span class="line"></span><br><span class="line">    t1 = threading.Thread(target=sing)</span><br><span class="line">    t2 = threading.Thread(target=dance)</span><br><span class="line"></span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        length = len(threading.enumerate())</span><br><span class="line">        print(<span class="string">'当前运行的线程数为：%d'</span>%length)</span><br><span class="line">        <span class="keyword">if</span> length&lt;=<span class="number">6</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        sleep(<span class="number">0.5</span>)</span><br></pre></td></tr></tbody></table></figure>
<pre><code>---开始---:Thu Jul  9 21:32:44 2020
正在唱歌...0
正在跳舞...0当前运行的线程数为：7

当前运行的线程数为：7
正在唱歌...1
正在跳舞...1当前运行的线程数为：7

当前运行的线程数为：7
正在唱歌...2
正在跳舞...2
当前运行的线程数为：7
当前运行的线程数为：7
当前运行的线程数为：5
</code></pre><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.whocareslearning.org.cn/2020/07/17/vasp-neb-idpp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ava1.png">
      <meta itemprop="name" content="zhouzhm">
      <meta itemprop="description" content="吾生也有涯，知也无涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="codemk">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/17/vasp-neb-idpp/" class="post-title-link" itemprop="url">vasp_neb_idpp-使用方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-07-17 15:35:00 / 修改时间：23:13:32" itemprop="dateCreated datePublished" datetime="2020-07-17T15:35:00+08:00">2020-07-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/neb/" itemprop="url" rel="index"><span itemprop="name">neb</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/07/17/vasp-neb-idpp/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/07/17/vasp-neb-idpp/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.6k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h3 id="Nudged-Elastic-Band（NEB）介绍"><a href="#Nudged-Elastic-Band（NEB）介绍" class="headerlink" title="Nudged Elastic Band（NEB）介绍"></a>Nudged Elastic Band（NEB）介绍</h3><p>搬运链接：<a href="https://mp.weixin.qq.com/s/pQ-GNPx94W0DndkIoRZ74A" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/pQ-GNPx94W0DndkIoRZ74A</a></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/07/17/vasp-neb-idpp/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
    <!--
    <div>
      
    </div>  -->
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zhouzhm"
      src="/images/ava1.png">
  <p class="site-author-name" itemprop="name">zhouzhm</p>
  <div class="site-description" itemprop="description">吾生也有涯，知也无涯</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sarizzm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;sarizzm" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://i.csdn.net/#/uc/profile" title="CSDN → https:&#x2F;&#x2F;i.csdn.net&#x2F;#&#x2F;uc&#x2F;profile" rel="noopener" target="_blank"><i class="fa fa-crosshairs fa-fw"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
  
      
        <script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
        <script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
        <div class="widget-wrap">
          <h3 class="widget-title">Tag Cloud</h3>
          <div id="myCanvasContainer" class="widget tagcloud">
              <canvas width="250" height="250" id="resCanvas" style="width=100%">
                <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/" rel="tag">awk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash/" rel="tag">bash</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bash-vasp/" rel="tag">bash_vasp</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog%E7%BE%8E%E5%8C%96/" rel="tag">blog美化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel/" rel="tag">excel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/idpp-neb/" rel="tag">idpp_neb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leecode/" rel="tag">leecode</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lunix/" rel="tag">lunix</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multi-task/" rel="tag">multi-task</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multiprocessing/" rel="tag">multiprocessing</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/multiprocessing-pool/" rel="tag">multiprocessing.pool</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oral-english/" rel="tag">oral_english</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pandas/" rel="tag">pandas</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pycharm/" rel="tag">pycharm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/re/" rel="tag">re</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threading/" rel="tag">threading</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threading-Lock/" rel="tag">threading.Lock</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typora/" rel="tag">typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zip-map-enumerate/" rel="tag">zip-map-enumerate</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92-%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98/" rel="tag">动态规划-背包问题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95/" rel="tag">哈希算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BE%E7%81%B5%E6%9C%BA-turing-machine-%E6%A8%A1%E5%9E%8B/" rel="tag">图灵机(turing machine)模型</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88-Stack/" rel="tag">栈(Stack)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92/" rel="tag">递归</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92%E4%B8%8E%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/" rel="tag">递归与分治策略</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%93%BE%E8%A1%A8/" rel="tag">链表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%9F%E5%88%97%EF%BC%88queue%EF%BC%89/" rel="tag">队列（queue）</a><span class="tag-list-count">1</span></li></ul>
              </canvas>
          </div>
        </div>
      
    
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhouzhm</span>
 <!--  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>  -->
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">278k</span>
</div>
<!--
  <div class="powered-by">
  <i class="fa fa-user-md"></i>
    <span id="busuanzi_container_site_uv">
        本站访客量: <span id="busuanzi_value_site_uv"></span>位
    </span>
  </div>

  <div class="powered-by">
  <i class="fa fa-user-md"></i>
    <span id="busuanzi_container_site_pv">
        本站访问量: <span id="busuanzi_value_site_pv"></span>次
    </span>
  </div>
     
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->
<!--

-->

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'ouQRqhHS28VSig7Qdha07YFS-gzGzoHsz',
      appKey     : 'sOIyts0asrItui9JkJn2qCoH',
      placeholder: "评论区",
      avatar     : 'monsterid',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>


 <!-- fireworks失败  -->
  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
   <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
   <script type="text/javascript" src="/js/src/fireworks.js"></script>
  
</body>
</html>


<!-- 页面点击小红心 -->
<!-- <script type="text/javascript" src="/js/src/clicklove.js"></script> -->
